<!DOCTYPE html>
<html>
<head>
    <title>My Events</title>
</head>
<body>
    <h1>My Events</h1>

    <p>
        {% if user.is_authenticated %}
            Logged in as {{ user.username }} |
            <form method="post" action="{% url 'logout' %}" style="display:inline;">
                {% csrf_token %}
                <button type="submit">Logout</button>
            </form>
        {% else %}
            <a href="{% url 'login' %}?next={% url 'event_list' %}">Login</a> |
            <a href="{% url 'register' %}">Register</a>
        {% endif %}
    </p>

    <ul>
        {% for event in my_events %}
            <li>
                <a href="{% url 'event_detail' event_code=event.code %}">
                    {{ event.title }} ({{ event.code }})
                </a>
            </li>
        {% empty %}
            <li>You havenâ€™t created any events yet.</li>
        {% endfor %}
    </ul>

    <p><a href="{% url 'event_create' %}">Create New Event</a></p>

    <hr>

    <h2>Join an Event</h2>
    {% if join_error %}
        <p style="color:red">{{ join_error }}</p>
    {% endif %}
    <form method="post">
        {% csrf_token %}
        <input type="text" name="event_code" placeholder="Enter event code" required>
        <button type="submit">Join</button>
    </form>
</body>
</html>
