<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}LiteSlido{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: {
                50: "#eff6ff",
                500: "#3b82f6",
                600: "#2563eb",
                700: "#1d4ed8",
                900: "#1e3a8a",
              },
            },
          },
        },
      };
    </script>
    <style>
      .fade-in {
        animation: fadeIn 0.5s ease-in;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .slide-in {
        animation: slideIn 0.3s ease-out;
      }
      @keyframes slideIn {
        from {
          transform: translateX(-100%);
        }
        to {
          transform: translateX(0);
        }
      }
    </style>
  </head>
  <body class="bg-gray-50 text-gray-800 min-h-screen">
    <!-- Navbar -->
    <nav class="bg-white shadow-lg border-b border-gray-100 sticky top-0 z-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
          <!-- Brand -->
          <div class="flex items-center">
            <a
              href="{% url 'event_list' %}"
              class="flex items-center space-x-2 text-xl font-bold text-primary-600 hover:text-primary-700 transition-colors duration-200"
            >
              <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
                <path
                  fill-rule="evenodd"
                  d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
                  clip-rule="evenodd"
                ></path>
              </svg>
              <span>LiteSlido</span>
            </a>
          </div>

          <!-- Navigation Links -->
          <div class="hidden md:flex items-center space-x-8">
            {% if user.is_authenticated %}
            <a
              href="{% url 'event_list' %}"
              class="text-gray-600 hover:text-primary-600 transition-colors duration-200 font-medium"
            >
              My Events
            </a>
            <a
              href="{% url 'profile' %}"
              class="text-gray-600 hover:text-primary-600 transition-colors duration-200 font-medium"
            >
              Profile
            </a>
            {% endif %}
          </div>

          <!-- User Menu -->
          <div class="flex items-center space-x-4">
            {% if user.is_authenticated %}
            <div class="flex items-center space-x-3">
              <div class="flex items-center space-x-2">
                {% if user.profile.avatar %}
                <img
                  src="{{ user.profile.avatar.url }}"
                  alt="{{ user.username }}"
                  class="w-8 h-8 rounded-full object-cover border-2 border-primary-200"
                />
                {% else %}
                <div
                  class="w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center"
                >
                  <span class="text-primary-600 font-semibold text-sm"
                    >{{ user.username|first|upper }}</span
                  >
                </div>
                {% endif %}
                <span class="text-gray-700 font-medium hidden sm:block"
                  >Hi, {{ user.username }}</span
                >
              </div>
              <form method="post" action="{% url 'logout' %}" class="inline">
                {% csrf_token %}
                <button
                  type="submit"
                  class="text-sm text-red-600 hover:text-red-800 transition-colors duration-200 font-medium px-3 py-2 rounded-lg hover:bg-red-50"
                >
                  Logout
                </button>
              </form>
            </div>
            {% else %}
            <div class="flex items-center space-x-4">
              <a
                href="{% url 'login' %}"
                class="text-primary-600 hover:text-primary-700 transition-colors duration-200 font-medium"
              >
                Login
              </a>
              <a
                href="{% url 'register' %}"
                class="bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors duration-200 font-medium shadow-md hover:shadow-lg transform hover:scale-105"
              >
                Register
              </a>
            </div>
            {% endif %}
          </div>
        </div>
      </div>
    </nav>

    <!-- Page Content -->
    <main class="fade-in">{% block content %}{% endblock %}</main>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 mt-16">
      <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
        <div class="text-center">
          <p class="text-gray-600">
            &copy; 2024 LiteSlido. Interactive event platform.
          </p>
        </div>
      </div>
    </footer>

    <!-- Delete Confirmation Modal -->
    <div
      id="delete-modal"
      class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50"
    >
      <div
        class="bg-white rounded-xl p-8 shadow-2xl max-w-md w-full mx-4 transform transition-all duration-300 scale-95 opacity-0"
        id="modal-content"
      >
        <div class="text-center">
          <div
            class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"
          >
            <svg
              class="w-8 h-8 text-red-600"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"
              ></path>
            </svg>
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-2">
            Delete this question?
          </h3>
          <p class="text-gray-600 mb-8">
            Are you sure you want to delete this question? This action cannot be
            undone.
          </p>
          <div class="flex justify-center space-x-4">
            <button
              id="cancel-delete"
              class="px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors duration-200 font-medium"
            >
              Cancel
            </button>
            <form id="delete-form" method="post" class="inline">
              {% csrf_token %}
              <button
                type="submit"
                class="px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors duration-200 font-medium shadow-md hover:shadow-lg"
              >
                Yes, Delete
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Enhanced delete modal functionality
      document.querySelectorAll(".delete-btn").forEach((btn) => {
        btn.addEventListener("click", function (e) {
          e.preventDefault();
          const modal = document.getElementById("delete-modal");
          const modalContent = document.getElementById("modal-content");
          const form = document.getElementById("delete-form");
          const action = this.getAttribute("data-action");

          form.action = action;
          modal.classList.remove("hidden");

          // Animate in
          setTimeout(() => {
            modalContent.classList.remove("scale-95", "opacity-0");
            modalContent.classList.add("scale-100", "opacity-100");
          }, 10);
        });
      });

      // Close modal functionality
      document
        .getElementById("cancel-delete")
        .addEventListener("click", function () {
          const modal = document.getElementById("delete-modal");
          const modalContent = document.getElementById("modal-content");

          // Animate out
          modalContent.classList.remove("scale-100", "opacity-100");
          modalContent.classList.add("scale-95", "opacity-0");

          setTimeout(() => {
            modal.classList.add("hidden");
          }, 300);
        });

      // Close modal on outside click
      document
        .getElementById("delete-modal")
        .addEventListener("click", function (e) {
          if (e.target === this) {
            const modal = document.getElementById("delete-modal");
            const modalContent = document.getElementById("modal-content");

            modalContent.classList.remove("scale-100", "opacity-100");
            modalContent.classList.add("scale-95", "opacity-0");

            setTimeout(() => {
              modal.classList.add("hidden");
            }, 300);
          }
        });

      // Add smooth scrolling to all internal links
      document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
        anchor.addEventListener("click", function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute("href"));
          if (target) {
            target.scrollIntoView({
              behavior: "smooth",
              block: "start",
            });
          }
        });
      });

      // Add loading states to forms
      document.querySelectorAll("form").forEach((form) => {
        form.addEventListener("submit", function () {
          const submitBtn = this.querySelector('button[type="submit"]');
          if (submitBtn) {
            submitBtn.disabled = true;
            submitBtn.innerHTML =
              '<svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>Processing...';
          }
        });
      });
    </script>
    
    {% block extra_scripts %}{% endblock %}
  </body>
</html>
